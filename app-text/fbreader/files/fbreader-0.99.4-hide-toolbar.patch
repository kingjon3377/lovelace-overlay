From 48510b45fb0cc7138d18bc154300f7f1693e09fe Mon Sep 17 00:00:00 2001
From: Supreme Aryal <supremearyal@gmail.com>
Date: Sun, 11 Aug 2013 21:40:53 -0400
Subject: [PATCH] Allow toolbar diabling with F9.

---
 zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.cpp | 9 +++++++++
 zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.h   | 3 +++
 3 files changed, 14 insertions(+)

diff --git a/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.cpp b/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.cpp
index aaa76a0..4055e0b 100644
--- a/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.cpp
+++ b/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.cpp
@@ -77,6 +77,11 @@ ZLQtApplicationWindow::ZLQtApplicationWindow(ZLApplication *application) :
 	setWindowIcon(icon);
 
 	myWindowToolBar = new QToolBar(this);
+	QAction *toggleWindowToolBarAction = new QAction(this);
+	toggleWindowToolBarAction->setShortcutContext(Qt::ApplicationShortcut);
+	toggleWindowToolBarAction->setShortcut(QKeySequence(Qt::Key_F9));
+	connect(toggleWindowToolBarAction, SIGNAL(triggered()), this, SLOT(toggleWindowToolBar()));
+	addAction(toggleWindowToolBarAction);
 	myWindowToolBar->setFocusPolicy(Qt::NoFocus);
 	myWindowToolBar->setMovable(false);
 	addToolBar(myWindowToolBar);
@@ -239,6 +244,10 @@ void ZLQtApplicationWindow::addToolbarItem(ZLToolbar::ItemPtr item) {
 	}
 }
 
+void ZLQtApplicationWindow::toggleWindowToolBar() {
+	myWindowToolBar->setVisible(!myWindowToolBar->isVisible());
+}
+
 ZLQtRunPopupAction::ZLQtRunPopupAction(QObject *parent, shared_ptr<ZLPopupData> data, size_t index) : QAction(parent), myData(data), myIndex(index) {
 	setText(QString::fromUtf8(myData->text(myIndex).c_str()));
 	connect(this, SIGNAL(triggered()), this, SLOT(onActivated()));
diff --git a/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.h b/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.h
index 4aa6a75..36449a6 100644
--- a/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.h
+++ b/zlibrary/ui/src/qt4/application/ZLQtApplicationWindow.h
@@ -84,6 +84,9 @@ friend class ZLQtToolBarAction;
 	bool myCursorIsHyperlink;
 	QCursor myStoredCursor;
 
+private Q_SLOTS:
+	void toggleWindowToolBar();
+
 private:
 	class LineEditParameter : public VisualParameter {
 
