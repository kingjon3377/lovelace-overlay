--- docdiff-0.4.0.orig/debian/docs
+++ docdiff-0.4.0/debian/docs
@@ -0,0 +1,7 @@
+readme.en.html
+readme.ja.html
+index.html
+img
+debian/contrib
+docdiffwebui.cgi
+docdiffwebui.html
--- docdiff-0.4.0.orig/debian/changelog
+++ docdiff-0.4.0/debian/changelog
@@ -0,0 +1,123 @@
+docdiff (0.4.0-1) unstable; urgency=low
+
+  * New upstream release
+  * Apply upstream svn update r193-r196.
+    - r196: Add preliminary support for RubyGems, thanks to takahashim
+      and sakuro.
+    - r195: Update comments and such.
+    - r194: Switch library install directory from rubylibdir (e.g.
+      /usr/lib/ruby/1.9.1) to datadir (e.g. /usr/share) for 1.9/1.8
+      compatibility.
+  * Modify dependency: Remove libiconv-ruby1.8 from Depends because
+    it is included in the ruby binary package. Add ruby1.9.1 for
+    alternatives of ruby which points ruby1.8 at this time.
+
+ -- Kenshi Muto <kmuto@debian.org>  Sat, 26 Feb 2011 17:36:37 +0900
+
+docdiff (0.3.4-1) unstable; urgency=low
+
+  * New upstream release
+  * Specify implicit ruby version (current 1.8) to docdiff script. 
+    (closes: #301910)
+  * Ready to accept ignore-whitespace and wordwrap patches contributed from
+    Andrew. Thanks. But because they cause unit-test failure, I disable
+    them at this time. I'll enable them when upstream accept.
+    (#452737)
+
+ -- Kenshi Muto <kmuto@debian.org>  Mon, 10 Dec 2007 05:24:26 +0000
+
+docdiff (0.3.3-1) unstable; urgency=low
+
+  * New upstream release
+  * Apply embeded anchor patch (closes: #346365)
+
+ -- Kenshi Muto <kmuto@debian.org>  Sat,  4 Feb 2006 03:23:55 +0000
+
+docdiff (0.3.2-1) unstable; urgency=low
+
+  * New upstream release
+
+ -- Kenshi Muto <kmuto@debian.org>  Tue,  8 Feb 2005 20:19:28 +0900
+
+docdiff (0.3.1-2) unstable; urgency=low
+
+  * New maintainer.
+  * Fix build-dep. This solves #291089 indeed.
+
+ -- Kenshi Muto <kmuto@debian.org>  Tue,  8 Feb 2005 20:03:38 +0900
+
+docdiff (0.3.1-1) unstable; urgency=low
+
+  * new upstream version.
+  * added debian/watch file.
+
+ -- akira yamada <akira@debian.org>  Sat,  9 Oct 2004 13:42:24 +0900
+
+docdiff (0.3.0-2) unstable; urgency=high
+
+  * debian/control: docdiff depends on ruby1.8 and libiconv-ruby1.8.
+    (closes: #267176)
+  * debian/manpage.sgml: removed desciption about "--format=terminal" and
+    "--format=stat".  (closes: #267159, #267160)
+
+ -- akira yamada <akira@debian.org>  Wed, 25 Aug 2004 13:47:53 +0900
+
+docdiff (0.3.0-1) unstable; urgency=low
+
+  * new upstream version.
+  * updated description.  Thanks to Hisashi MORITA.
+
+ -- akira yamada <akira@debian.org>  Thu,  3 Jun 2004 15:10:49 +0900
+
+docdiff (0.1.8+0.3.0rc3-1) unstable; urgency=low
+
+  * new upstream version. (0.3.0 RC3)
+
+ -- akira yamada <akira@debian.org>  Mon, 17 May 2004 01:17:03 +0900
+
+docdiff (0.1.8+0.3.0pre20040411-1) unstable; urgency=low
+
+  * new upstream version. (0.3.0 RC)
+  * removed chasen from Suggests.  docdiff-0.3.0 does not require ChaSen at
+    any time.
+  * updated debian/copyright.
+  
+ -- akira yamada <akira@debian.org>  Sat, 15 May 2004 03:09:08 +0900
+
+docdiff (0.1.8-1) unstable; urgency=low
+
+  * new upstream version.
+  * the version of docdiff reads ~/.chasenrc.docdiff or /etc/docdiff/chasenrc.
+    this package provides /etc/docdiff/chasenrc. (closes: #192261)
+
+ -- akira yamada <akira@debian.org>  Sun, 14 Dec 2003 14:45:09 +0900
+
+docdiff (0.1.5-4) unstable; urgency=low
+
+  * added docbook-to-man to Build-Depends-Indep, closes: #134908.
+    Thanks to Matt Hope <dopey@debian.org> and Otavio Real Salvador
+    <otavio@freedom.ind.br>.
+
+ -- akira yamada <akira@debian.org>  Mon, 25 Feb 2002 15:26:33 +0900
+
+docdiff (0.1.5-3) unstable; urgency=low
+
+  * Suggests: chasen (closes: #92585, #97142)
+  * docdiff.sgml: removed sentence "it  has documentation in the GNU
+    Info format; see below" because no info file available
+    (closes: #97143)
+
+ -- akira yamada <akira@debian.org>  Sat, 19 May 2001 13:00:49 +0900
+
+docdiff (0.1.5-2) unstable; urgency=low
+
+  * Depends: diff.
+  * rewrite .chasenrc.docdiff for ipadic.
+
+ -- akira yamada <akira@debian.org>  Thu, 15 Mar 2001 17:11:29 +0900
+
+docdiff (0.1.5-1) unstable; urgency=low
+
+  * Initial Release.
+
+ -- akira yamada <akira@debian.org>  Wed,  7 Feb 2001 15:48:59 +0900
--- docdiff-0.4.0.orig/debian/watch
+++ docdiff-0.4.0/debian/watch
@@ -0,0 +1,2 @@
+version=2
+http://www.kt.rim.or.jp/~hisashim/docdiff/docdiff-([0-9].*)\.tar\.gz
--- docdiff-0.4.0.orig/debian/copyright
+++ docdiff-0.4.0/debian/copyright
@@ -0,0 +1,48 @@
+This package was debianized by akira yamada <akira@debian.org> on
+Wed,  7 Feb 2001 15:48:59 +0900.
+
+It was downloaded from <URL:http://www.kt.rim.or.jp/~hisashim/docdiff/>
+
+Upstream Author: Hisashi Morita <hisashim at kt.rim.or.jp>
+
+Copyright:
+
+This software is distributed under so-called modified BSD style
+license ( http://www.opensource.org/licenses/bsd-license.php (without
+advertisement clause).  By contributing to this software, you agree
+that your contribution may be incorporated under the same license.
+
+Copyright and condition of use of main portion of the source:
+
+    Copyright (C) Hisashi MORITA.  All rights reserved.
+
+    Redistribution and use in source and binary forms, with or without
+    modification, are permitted provided that the following conditions
+    are met:
+    1. Redistributions of source code must retain the above copyright
+       notice, this list of conditions and the following disclaimer.
+    2. Redistributions in binary form must reproduce the above copyright
+       notice, this list of conditions and the following disclaimer in the 
+       documentation and/or other materials provided with the distribution.
+    3. Neither the name of the University nor the names of its contributors
+       may be used to endorse or promote products derived from this software
+       without specific prior written permission.
+
+    THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
+    ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
+    IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
+    ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
+    FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
+    DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
+    OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
+    HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
+    LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
+    OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
+    SUCH DAMAGE.
+
+diff library (docdiff/diff.rb and docdiff/diff/*) was originally a
+part of Ruby /CVS by Akira TANAKA. Ruby/CVS is licensed under modified
+BSD style license.  See the following for detail.
+
+  * http://raa.ruby-lang.org/list.rhtml?name=ruby-cvs
+  * http://cvs.m17n.org/~akr/ruby-cvs/
--- docdiff-0.4.0.orig/debian/manpage.sgml
+++ docdiff-0.4.0/debian/manpage.sgml
@@ -0,0 +1,322 @@
+<!doctype refentry PUBLIC "-//OASIS//DTD DocBook V4.1//EN" [
+
+<!-- Process this file with docbook-to-man to generate an nroff manual
+     page: `docbook-to-man manpage.sgml > manpage.1'.  You may view
+     the manual page with: `docbook-to-man manpage.sgml | nroff -man |
+     less'.  A typical entry in a Makefile or Makefile.am is:
+
+manpage.1: manpage.sgml
+	docbook-to-man $< > $@
+
+    
+	The docbook-to-man binary is found in the docbook-to-man package.
+	Please remember that if you create the nroff version in one of the
+	debian/rules file targets (such as build), you will need to include
+	docbook-to-man in your Build-Depends control field.
+
+  -->
+
+  <!-- Fill in your name for FIRSTNAME and SURNAME. -->
+  <!ENTITY dhfirstname "<firstname>AKIRA</firstname>">
+  <!ENTITY dhsurname   "<surname>YAMADA</surname>">
+  <!-- Please adjust the date whenever revising the manpage. -->
+  <!ENTITY dhdate      "<date>5 15, 2004</date>">
+  <!-- SECTION should be 1-8, maybe w/ subsection other parameters are
+       allowed: see man(7), man(1). -->
+  <!ENTITY dhsection   "<manvolnum>1</manvolnum>">
+  <!ENTITY dhemail     "<email>akira@debian.org</email>">
+  <!ENTITY dhusername  "akira yamada">
+  <!ENTITY dhucpackage "<refentrytitle>DOCDIFF</refentrytitle>">
+  <!ENTITY dhpackage   "docdiff">
+
+  <!ENTITY debian      "<productname>Debian</productname>">
+  <!ENTITY gnu         "<acronym>GNU</acronym>">
+  <!ENTITY gpl         "&gnu; <acronym>GPL</acronym>">
+]>
+
+<refentry>
+  <refentryinfo>
+    <address>
+      &dhemail;
+    </address>
+    <author>
+      &dhfirstname;
+      &dhsurname;
+    </author>
+    <copyright>
+      <year>2004</year>
+      <holder>&dhusername;</holder>
+    </copyright>
+    &dhdate;
+  </refentryinfo>
+  <refmeta>
+    &dhucpackage;
+
+    &dhsection;
+  </refmeta>
+  <refnamediv>
+    <refname>&dhpackage;</refname>
+
+    <refpurpose>character/word-oriented diff</refpurpose>
+  </refnamediv>
+  <refsynopsisdiv>
+    <cmdsynopsis>
+      <command>&dhpackage;</command>
+
+
+      <arg><option>options</option></arg>
+
+      <arg choice="req"><replaceable>file1</replaceable></arg>
+
+      <arg choice="req"><replaceable>file2</replaceable></arg>
+    </cmdsynopsis>
+  </refsynopsisdiv>
+  <refsect1>
+    <title>DESCRIPTION</title>
+
+    <para>This manual page documents briefly the
+      <command>&dhpackage;</command>
+      commands.</para>
+
+    <para>This manual page was written for the &debian; distribution
+      because the original program does not have a manual page.
+      Instead, it has documentation in the HTML
+      format; see below.</para>
+
+    <para><command>&dhpackage;</command> is a program that
+      compares two files and shows the difference. 
+      It can compare files word by word, char by char, or line by line. 
+      It has several output formats such as 
+      HTML/XHTML, tty, Manued, or user-defined markup.</para>
+
+    <para>It supports several encodings and end-of-line characters, 
+      including ASCII, UTF-8, EUC-JP, Shift_JIS, CR, LF, and CRLF.</para>
+
+  </refsect1>
+  <refsect1>
+    <title>OPTIONS</title>
+
+    <variablelist>
+      <varlistentry>
+	<term><option>--resolution=<replaceable>RESOLUTION</replaceable></option></term>
+	<listitem>
+	  <para>specify resolution (granularity)
+	    line|word|char (default is word)</para>
+	</listitem>
+      </varlistentry>
+      
+      <varlistentry>
+	<term><option>--line</option></term>
+	<listitem>
+	  <para>set resolution to line</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--word</option></term>
+	<listitem>
+	  <para>set resolution to word</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--char</option></term>
+	<listitem>
+	  <para>set resolution to char</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--encoding=<replaceable>ENCODING</replaceable></option></term>
+	<listitem>
+	  <para>specify character encoding
+	    ASCII|EUC-JP|Shift_JIS|UTF-8|auto
+	    (default is auto)</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--ascii</option></term>
+	<listitem>
+	  <para>same as --encoding=ASCII</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--eucjp</option></term>
+	<listitem>
+	  <para>same as --encoding=EUC-JP</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--sjis</option></term>
+	<listitem>
+	  <para>same as --encoding=Shift_JIS</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--utf8</option></term>
+	<listitem>
+	  <para>same as --encoding=UTF-8</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--eol=<replaceable>EOL</replaceable></option></term>
+	<listitem>
+	  <para>specify end-of-line character
+	    CR|LF|CRLF|auto
+	    (default is auto)</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--cr</option></term>
+	<listitem>
+	  <para>same as --eol=CR</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--lf</option></term>
+	<listitem>
+	  <para>same as --eol=LF</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--crlf</option></term>
+	<listitem>
+	  <para>same as --eol=CRLF</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--format=FORMAT</option></term>
+	<listitem>
+	  <para>specify output format
+	    tty|manued|html|wdiff|user
+	    (default is html; 
+	    user tags have to be described in config file)</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--tty</option></term>
+	<listitem>
+	  <para>same as --format=tty</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--manued</option></term>
+	<listitem>
+	  <para>same as --format=manued</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--html</option></term>
+	<listitem>
+	  <para>same as --format=html</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--wdiff</option></term>
+	<listitem>
+	  <para>same as --format=wdiff</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--digest</option></term>
+	<listitem>
+	  <para>digest output, do not show all</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--cache</option></term>
+	<listitem>
+	  <para>use file cache</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--no-config-file</option></term>
+	<listitem>
+	  <para>do not read config files</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--verbose</option></term>
+	<listitem>
+	  <para>run verbosely</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--help</option></term>
+	<listitem>
+	  <para>show usage</para>
+	</listitem>
+      </varlistentry>
+                             
+      <varlistentry>
+	<term><option>--version</option></term>
+	<listitem>
+	  <para>show version</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--license</option></term>
+	<listitem>
+	  <para>show license</para>
+	</listitem>
+      </varlistentry>
+
+      <varlistentry>
+	<term><option>--author</option></term>
+	<listitem>
+	  <para>show author(s)</para>
+	</listitem>
+      </varlistentry>
+    </variablelist>
+  </refsect1>
+  <refsect1>
+    <title>SEE ALSO</title>
+
+    <para>/usr/share/doc/docdiff/readme.html.</para>
+  </refsect1>
+  <refsect1>
+    <title>AUTHOR</title>
+
+    <para>This manual page was written by &dhusername; &dhemail; for
+      the &debian; system (but may be used by others).</para>
+
+  </refsect1>
+</refentry>
+
+<!-- Keep this comment at the end of the file
+Local variables:
+mode: sgml
+sgml-omittag:t
+sgml-shorttag:t
+sgml-minimize-attributes:nil
+sgml-always-quote-attributes:t
+sgml-indent-step:2
+sgml-indent-data:t
+sgml-parent-document:nil
+sgml-default-dtd-file:nil
+sgml-exposed-tags:nil
+sgml-local-catalogs:nil
+sgml-local-ecat-files:nil
+End:
+-->
+
+
--- docdiff-0.4.0.orig/debian/dirs
+++ docdiff-0.4.0/debian/dirs
@@ -0,0 +1,3 @@
+usr/bin
+etc/docdiff
+usr/share/man/man1
--- docdiff-0.4.0.orig/debian/control
+++ docdiff-0.4.0/debian/control
@@ -0,0 +1,18 @@
+Source: docdiff
+Section: text
+Priority: optional
+Maintainer: Kenshi Muto <kmuto@debian.org>
+Build-Depends-Indep: debhelper (>> 5.0), cdbs (>= 0.4.27), dpatch (>= 1.11), ruby, ruby-dev, docbook-to-man
+Standards-Version: 3.7.3
+
+Package: docdiff
+Architecture: all
+Depends: ruby | ruby1.9.1
+Suggests: httpd
+Description: Compares two files word by word / char by char
+ DocDiff compares two files and shows the difference.  It can compare files
+ word by word, char by char, or line by line. 
+ .
+ It has several output formats such as HTML/XHTML, tty, Manued, or
+ user-defined markup.  It supports several encodings and end-of-line
+ characters, including ASCII, UTF-8, EUC-JP, Shift_JIS, CR, LF, and CRLF.
--- docdiff-0.4.0.orig/debian/compat
+++ docdiff-0.4.0/debian/compat
@@ -0,0 +1 @@
+5
--- docdiff-0.4.0.orig/debian/examples
+++ docdiff-0.4.0/debian/examples
@@ -0,0 +1,17 @@
+docdiff.conf.example
+sample/01.en.ascii.cr
+sample/01.en.ascii.crlf
+sample/01.en.ascii.lf
+sample/01.ja.eucjp.lf
+sample/01.ja.sjis.cr
+sample/01.ja.sjis.crlf
+sample/01.ja.utf8.crlf
+sample/02.en.ascii.cr
+sample/02.en.ascii.crlf
+sample/02.en.ascii.lf
+sample/02.ja.eucjp.lf
+sample/02.ja.sjis.cr
+sample/02.ja.sjis.crlf
+sample/02.ja.utf8.crlf
+sample/humpty_dumpty01.ascii.lf
+sample/humpty_dumpty02.ascii.lf
--- docdiff-0.4.0.orig/debian/rules
+++ docdiff-0.4.0/debian/rules
@@ -0,0 +1,22 @@
+#!/usr/bin/make -f
+include /usr/share/cdbs/1/rules/debhelper.mk
+include /usr/share/cdbs/1/rules/dpatch.mk
+
+DEB_MAKE_CLEAN_TARGET = 
+DEB_MAKE_BUILD_TARGET =
+DEB_MAKE_INSTALL_TARGET =
+RUBY := ruby1.8
+RLIBDIR := $(shell $(RUBY) -rrbconfig -e 'print Config::CONFIG["rubylibdir"]')
+
+clean::
+	-rm -f docdiff.1
+
+build/docdiff::
+	/usr/bin/docbook-to-man debian/manpage.sgml > docdiff.1
+
+install/docdiff::
+	install -o root -g root -d $(DEB_DESTDIR)$(RLIBDIR)
+	tar cf - docdiff | ( cd $(DEB_DESTDIR)$(RLIBDIR) && tar xvf -)
+	install -o root -g root -m 0755 docdiff.rb $(DEB_DESTDIR)/usr/bin/docdiff
+	install -o root -g root -m 0644 docdiff.conf.example $(DEB_DESTDIR)/etc/docdiff/docdiff.conf
+	install -o root -g root -m 0644 docdiff.1 $(DEB_DESTDIR)/usr/share/man/man1
--- docdiff-0.4.0.orig/debian/contrib/svndocdiff.el
+++ docdiff-0.4.0/debian/contrib/svndocdiff.el
@@ -0,0 +1,38 @@
+;; The following kind of elisp, which shows a docdiff of the current file
+;; controlled with svn. Mozilla will jump to the current point.
+;; Enjoy.
+;;	--dancerj (7 Jan 2006, Junichi Uekawa <dancer@debian.org>)
+
+(defun svndocdiff-current ()
+  "Invoke svn docdiff for the current buffer,
+and run mozilla-firefox -remote openfile(filename)
+to preview the diff"
+  (interactive)
+  (let* ((currentname 
+	  (buffer-file-name (current-buffer)))
+	 (svnorigname
+	  (concat default-directory
+		  ".svn/text-base/" 
+		  (file-name-nondirectory 
+		   (buffer-file-name (current-buffer)))
+		  ".svn-base"))
+	 (diff-command
+	  "/usr/bin/docdiff --html %s %s > %s")
+	 (mozilla-command-line
+	  "mozilla-firefox -remote 'openurl(file://%s#currentloc)'")
+	 (moztmpfile-name
+	  (concat default-directory
+		  ".svn/.docdifftmp.html")))
+    (insert "")
+    (save-buffer)
+    (backward-delete-char 1)
+    (shell-command
+     (format diff-command 
+	     svnorigname 
+	     currentname
+	     moztmpfile-name)
+     "*svndocdiff*" "*svndocdiff-err*")
+    (shell-command
+     (format mozilla-command-line
+	     moztmpfile-name)
+     "*svndocdiff*" "*svndocdiff-err*")))
--- docdiff-0.4.0.orig/debian/patches/00list
+++ docdiff-0.4.0/debian/patches/00list
@@ -0,0 +1,3 @@
+01svn-r196.dpatch
+02svndocdiff.dpatch
+03cgipath.dpatch
--- docdiff-0.4.0.orig/debian/patches/03cgipath.dpatch
+++ docdiff-0.4.0/debian/patches/03cgipath.dpatch
@@ -0,0 +1,19 @@
+#! /bin/sh /usr/share/dpatch/dpatch-run
+## 03cgipath.dpatch by Kenshi Muto <kmuto@debian.org>
+##
+## All lines beginning with `## DP:' are a description of the patch.
+## DP: No description.
+
+@DPATCH@
+diff -urNad '--exclude=CVS' '--exclude=.svn' '--exclude=.git' '--exclude=.arch' '--exclude=.hg' '--exclude=_darcs' '--exclude=.bzr' docdiff-0.4.0~/docdiffwebui.html docdiff-0.4.0/docdiffwebui.html
+--- docdiff-0.4.0~/docdiffwebui.html	2011-02-23 02:03:17.000000000 +0900
++++ docdiff-0.4.0/docdiffwebui.html	2011-02-26 17:38:06.948692616 +0900
+@@ -43,7 +43,7 @@
+   <p><a href="http://www.kt.rim.or.jp/~hisashim/docdiff/">DocDiff</a> is a word/char oriented text file comparison utility.</p>
+   <p><strong>Caution: This web ui is totally experimental and insecure!  Do not use it on public site.</strong></p>
+   <div class="form">
+-  <form action="cgi-bin/docdiffwebui.cgi" method="post" enctype="multipart/form-data" target="_blank">
++  <form action="/cgi-bin/docdiffwebui.cgi" method="post" enctype="multipart/form-data" target="_blank">
+     <fieldset>
+       <legend>Files to compare</legend>
+       <ol>
--- docdiff-0.4.0.orig/debian/patches/01svn-r196.dpatch
+++ docdiff-0.4.0/debian/patches/01svn-r196.dpatch
@@ -0,0 +1,127 @@
+#! /bin/sh /usr/share/dpatch/dpatch-run
+## 01svn-r196.dpatch by Kenshi Muto <kmuto@debian.org>
+##
+## All lines beginning with `## DP:' are a description of the patch.
+## DP: No description.
+
+@DPATCH@
+diff -urNad '--exclude=CVS' '--exclude=.svn' '--exclude=.git' '--exclude=.arch' '--exclude=.hg' '--exclude=_darcs' '--exclude=.bzr' docdiff-0.4.0~/Makefile docdiff-0.4.0/Makefile
+--- docdiff-0.4.0~/Makefile	2011-02-23 02:03:17.000000000 +0900
++++ docdiff-0.4.0/Makefile	2011-02-26 17:48:10.956690655 +0900
+@@ -9,6 +9,7 @@
+ TESTS  = testcharstring.rb testdiff.rb testdifference.rb \
+          testdocdiff.rb testdocument.rb testview.rb
+ DIST   = Makefile devutil docdiff docdiff.conf.example docdiff.rb \
++         docdiff.gemspec \
+          docdiffwebui.html docdiffwebui.cgi \
+          $(DOCSRC) $(DOCS) $(TESTS)
+ TESTLOGS = testdocdiff.log testcharstring.log testdocument.log \
+@@ -22,8 +23,6 @@
+ DESTDIR =
+ PREFIX  = /usr/local
+ datadir = $(DESTDIR)$(PREFIX)/share
+-rubylibdir = $(shell $(RUBY) -rrbconfig -e \
+-                             "Config::CONFIG['rubylibdir'].display")
+ 
+ all:	$(DOCS)
+ 
+@@ -58,10 +57,10 @@
+ 	cp -Ppv docdiff.rb $(DESTDIR)$(PREFIX)/bin/docdiff
+ 	chmod +x $(DESTDIR)$(PREFIX)/bin/docdiff
+ 
+-	@if [ ! -d $(DESTDIR)$(rubylibdir) ]; then \
+-	  mkdir -p $(DESTDIR)$(rubylibdir); \
++	@if [ ! -d $(datadir)$(PRODUCT) ]; then \
++	  mkdir -p $(datadir)$(PRODUCT); \
+ 	fi
+-	($(TAR_XVCS) -cf - docdiff) | (cd $(DESTDIR)$(rubylibdir) && tar -xpf -)
++	($(TAR_XVCS) -cf - docdiff) | (cd $(datadir)$(PRODUCT) && tar -xpf -)
+ 
+ 	@if [ ! -d $(DESTDIR)/etc/$(PRODUCT) ]; then \
+ 	  mkdir -p $(DESTDIR)/etc/$(PRODUCT); \
+@@ -75,7 +74,7 @@
+ 
+ uninstall:
+ 	-rm -fr $(DESTDIR)$(PREFIX)/bin/docdiff
+-	-rm -fr $(DESTDIR)$(rubylibdir)/$(PRODUCT)
++	-rm -fr $(datadir)/$(PRODUCT)
+ 	-rm -fr $(DESTDIR)/etc/$(PRODUCT)
+ 	-rm -fr $(datadir)/doc/$(PRODUCT)
+ 
+@@ -85,6 +84,10 @@
+ 	$(TAR_XVCS) -zvcf $(PRODUCT)-$(VERSION).tar.gz $(PRODUCT)-$(VERSION)
+ 	-rm -fr $(PRODUCT)-$(VERSION)
+ 
++gem: $(PRODUCT)-$(VERSION).gem
++$(PRODUCT)-$(VERSION).gem: $(PRODUCT).gemspec
++	gem build $<
++
+ wwwupload:
+ 	$(MAKE) www WWWDRYRUN=
+ www: $(DOCSRC) $(DOCS)
+@@ -99,6 +102,7 @@
+ 
+ distclean: clean
+ 	-rm -fr $(PRODUCT)-$(VERSION).tar.gz
++	-rm -fr $(PRODUCT)-$(VERSION).gem
+ 
+-.PHONY:	all testall test docs install uninstall dist \
++.PHONY:	all testall test docs install uninstall dist gem \
+ 	wwwupload www clean distclean
+diff -urNad '--exclude=CVS' '--exclude=.svn' '--exclude=.git' '--exclude=.arch' '--exclude=.hg' '--exclude=_darcs' '--exclude=.bzr' docdiff-0.4.0~/docdiff.gemspec docdiff-0.4.0/docdiff.gemspec
+--- docdiff-0.4.0~/docdiff.gemspec	1970-01-01 09:00:00.000000000 +0900
++++ docdiff-0.4.0/docdiff.gemspec	2011-02-26 17:48:10.952693214 +0900
+@@ -0,0 +1,27 @@
++# -*- encoding: utf-8 -*-
++
++Gem::Specification.new do |s|
++  s.name        = "docdiff"
++  s.version     = "0.4.0"
++  s.platform    = Gem::Platform::RUBY
++  s.authors     = ["Hisashi Morita"]
++  s.email       = ["hisashim at users.sourceforge.net"]
++  s.homepage    = "http://docdiff.sourceforge.net"
++  s.summary     = %q{Word-by-word diff}
++  s.description = %q{DocDiff compares two text files and shows the
++                     difference. It can compare files word by word,
++                     character by character, or line by line. It has
++                     several output formats such as HTML, tty, Manued,
++                     or user-defined markup.}
++  s.rubyforge_project = "docdiff"
++  s.files       = Dir.glob %w{Makefile Rakefile devutil/**/*
++                              docdiff.conf.example docdiff.gemspec
++                              docdiff.rb docdiff/**/* docdiffwebui.cgi
++                              docdiffwebui.html img/**/* index.html
++                              langfilter.rb readme.html sample/**/*
++                              test*.rb viewdiff.rb}
++  s.test_files  = Dir.glob %w{test*.rb}
++  s.bindir      = "."
++  s.executables = "docdiff.rb"
++  s.require_paths = ["."]
++end
+diff -urNad '--exclude=CVS' '--exclude=.svn' '--exclude=.git' '--exclude=.arch' '--exclude=.hg' '--exclude=_darcs' '--exclude=.bzr' docdiff-0.4.0~/docdiff.rb docdiff-0.4.0/docdiff.rb
+--- docdiff-0.4.0~/docdiff.rb	2011-02-23 02:03:17.000000000 +0900
++++ docdiff-0.4.0/docdiff.rb	2011-02-26 17:48:10.952693214 +0900
+@@ -1,9 +1,7 @@
+-#!/usr/bin/ruby
+-# DocDiff: word/char-oriented text comparison utility
+-# 2002-06-27 Thu ... 201x-xx-xx xxx
+-# Hisashi MORITA
+-# requirement for runtime: Ruby (> 1.8)
+-# requirement for testing: above plus iconv
++#!/usr/bin/ruby -I /usr/share/docdiff
++# DocDiff: word/character-oriented text comparison utility
++# Copyright (C) 2002-2011 Hisashi MORITA
++# Requirements: Ruby (>= 1.8)
+ 
+ require 'docdiff/difference'
+ require 'docdiff/document'
+@@ -13,7 +11,7 @@
+ class DocDiff
+ 
+   AppVersion = '0.4.0'
+-  Author = "Copyright (C) 2002-201x Hisashi MORITA.\n" +
++  Author = "Copyright (C) 2002-2011 Hisashi MORITA.\n" +
+            "diff library originates from Ruby/CVS by TANAKA Akira.\n"
+   License = "This software is licensed under so-called modified BSD license.\n" +
+             "See the document for detail.\n"
--- docdiff-0.4.0.orig/debian/patches/02svndocdiff.dpatch
+++ docdiff-0.4.0/debian/patches/02svndocdiff.dpatch
@@ -0,0 +1,20 @@
+#! /bin/sh /usr/share/dpatch/dpatch-run
+## 02svndocdiff.dpatch by Kenshi Muto <kmuto@debian.org>
+##
+## All lines beginning with `## DP:' are a description of the patch.
+## DP: No description.
+
+@DPATCH@
+diff -urNad docdiff-0.4.0~/docdiff/view.rb docdiff-0.4.0/docdiff/view.rb
+--- docdiff-0.4.0~/docdiff/view.rb	2007-12-09 08:14:09.000000000 +0000
++++ docdiff-0.4.0/docdiff/view.rb	2007-12-10 05:54:55.000000000 +0000
+@@ -262,7 +262,8 @@
+     [(@eol_char||"") + '</div></body></html>' + (@eol_char||"")]
+   end
+   HTMLEscapeDic = {'<'=>'&lt;', '>'=>'&gt;', '&'=>'&amp;', '  '=>'&nbsp;&nbsp;',
+-                   "\r\n" => "<br />\r\n", "\r" => "<br />\r", "\n" => "<br />\n"}
++                   "\r\n" => "<br />\r\n", "\r" => "<br />\r", "\n" => "<br />\n",
++                   "" => "<a name=\"currentloc\"></a>"}
+   HTMLEscapePat = /(\r\n|#{HTMLEscapeDic.keys.collect{|k|Regexp.quote(k)}.join('|')})/m
+   def html_tags()
+     {:outside_escape_dic  => HTMLEscapeDic,
