diff -ru clients.old/audacious/audplugin.cc clients/audacious/audplugin.cc
--- clients.old/audacious/audplugin.cc	2011-04-05 16:28:24.000000000 -0400
+++ clients/audacious/audplugin.cc	2011-04-05 16:30:32.000000000 -0400
@@ -44,6 +44,10 @@
 #define audacious_drct_is_shuffle aud_drct_pl_shuffle_is_enabled
 #define audacious_drct_get_playqueue_length aud_drct_pq_get_length
 
+#include <glibmm.h>
+
+using Glib::filename_to_utf8;
+
 #else /* AUDACIOUS24 */
 
 #include <audacious/plugin.h>
--- vars.mk.in.old	2011-04-05 16:49:19.000000000 -0400
+++ vars.mk.in	2011-04-05 16:50:12.000000000 -0400
@@ -48,8 +48,8 @@
 GLIB2LDFLAGS=`pkg-config glib-2.0 --libs`
 GLIB1LDFLAGS=`pkg-config glib --libs`
 
-AUDACIOUSCPPFLAGS=@audacious_CFLAGS@ @dbus_glib_CFLAGS@ -I../clients/xmms/
-AUDACIOUSLDFLAGS=@audacious_LIBS@ @dbus_glib_LIBS@
+AUDACIOUSCPPFLAGS=@audacious_CFLAGS@ @dbus_glib_CFLAGS@ `pkg-config glib-2.0 glibmm-2.4 --cflags` -I../clients/xmms/
+AUDACIOUSLDFLAGS=@audacious_LIBS@ @dbus_glib_LIBS@ `pkg-config glib-2.0 glibmm-2.4 --libs` 
 
 LDFLAGS=-L. @LIBS@
 
diff -ru clients.old/audacious/audplugin.cc clients/audacious/audplugin.cc
--- clients.old/audacious/audplugin.cc	2011-04-05 17:04:41.000000000 -0400
+++ clients/audacious/audplugin.cc	2011-04-05 17:05:54.000000000 -0400
@@ -106,7 +106,11 @@
     string result = tmp;
     free(tmp);
     gchar *realfn = g_filename_from_uri(result.c_str(), NULL, NULL);
+#ifdef AUDACIOUS24
+    tmp = const_cast<char *>(aud_filename_to_utf8(realfn ? realfn : result.c_str()).raw().c_str());
+#else /* AUDACIOUS24 */
     tmp = aud_filename_to_utf8(realfn ? realfn : result.c_str());
+#endif /* AUDACIOUS24 */
     result = tmp;
     free(tmp);
     free(realfn);
