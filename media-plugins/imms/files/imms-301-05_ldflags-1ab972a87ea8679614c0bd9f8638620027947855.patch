From 1ab972a87ea8679614c0bd9f8638620027947855 Mon Sep 17 00:00:00 2001
From: "Artur R. Czechowski" <arturcz@hell.pl>
Date: Tue, 27 Aug 2013 21:41:12 +0200
Subject: [PATCH] pass hardening options to build processes

Changes in autotools to pass LDFLAGS to linker
---
 imms/configure.ac | 3 ++-
 imms/vars.mk.in   | 2 +-
 2 files changed, 3 insertions(+), 2 deletions(-)

diff --git a/imms/configure.ac b/imms/configure.ac
index e552dcc..7c1069a 100644
--- a/imms/configure.ac
+++ b/imms/configure.ac
@@ -263,7 +263,7 @@ if test "$enable_analyzer" != "no"; then
 fi
 
 if test "$with_screensaver" != "no"; then
-    LDFLAGS="-L/usr/X11R6/lib"
+    LDFLAGS="${LDFLAGS} -L/usr/X11R6/lib"
     AC_CHECK_LIB(X11, XFlush,, [with_screensaver=no])
     AC_CHECK_LIB(Xext, XextFindDisplay,, [with_screensaver=no])
     AC_CHECK_LIB(Xss, XScreenSaverQueryInfo,, [with_screensaver=no])
@@ -410,6 +410,7 @@ AC_SUBST(INSTALL)
 AC_SUBST(XCPPFLAGS)
 AC_SUBST(TAGCPPFLAGS)
 AC_SUBST(LIBS)
+AC_SUBST(LDFLAGS)
 AC_SUBST(PLUGINS)
 AC_SUBST(OPTIONAL)
 
diff --git a/imms/vars.mk.in b/imms/vars.mk.in
index 0d14c85..f60eb3f 100644
--- a/imms/vars.mk.in
+++ b/imms/vars.mk.in
@@ -51,6 +51,6 @@ GLIB1LDFLAGS=`pkg-config glib --libs`
 AUDACIOUSCPPFLAGS=@audacious_CFLAGS@ @dbus_glib_CFLAGS@ -I../clients/xmms/
 AUDACIOUSLDFLAGS=@audacious_LIBS@ @dbus_glib_LIBS@
 
-LDFLAGS=-L. @LIBS@
+LDFLAGS=-L. @LIBS@ @LDFLAGS@
 
 default: all
